---
title: Memory Hack
author: attilathedud
date: 2023-12-25
category: Fundamentos
layout: post
---

# Alvo

Para o nosso primeiro hack pr√°tico, vamos usar um jogo chamado **"The Battle for Wesnoth"** (ou simplesmente Wesnoth). Ele √© gratuito, de c√≥digo aberto, e n√£o tem nenhum mecanismo anti-cheat ‚Äî perfeito para aprender sem obst√°culos.

A maioria das aulas deste site usa a vers√£o **1.14.9**. Para instal√°-la na sua VM, abra o PowerShell como administrador e execute:

```powershell
choco install wesnoth --version=1.14.9 -y
```

Isso usa o Chocolatey para instalar o Wesnoth automaticamente. Depois da instala√ß√£o, abra o jogo, verifique que funciona, v√° em **Prefer√™ncias** e mude para o modo de v√≠deo **Janela** (*Windowed*). Por fim, jogue o tutorial para entender as mec√¢nicas b√°sicas do jogo.

# Identificar

Nosso objetivo √© **aumentar nosso ouro** no jogo. O ouro √© a moeda do Wesnoth ‚Äî voc√™ a gasta para recrutar tropas. Quanto mais ouro, mais ex√©rcitos voc√™ pode formar.

Vamos usar o **Cheat Engine** ‚Äî uma ferramenta de scan de mem√≥ria ‚Äî para encontrar onde o ouro est√° guardado na RAM e ent√£o modificar esse valor. Seguiremos os quatro passos que aprendemos na [aula de Fundamentos de Hacking](/pages/1/03/).

Os jogadores s√≥ recebem ouro em cen√°rios. Para criar um cen√°rio, selecione **Multiplayer** ‚Üí **Jogo Local** (*Local Game*):

![Op√ß√£o de Jogo Local no Wesnoth](/assets/images/1/5/wesnoth1.png)

Deixe as configura√ß√µes padr√£o e inicie.

# Entender

No Wesnoth, o ouro do jogador √© guardado numa **vari√°vel na mem√≥ria**. Essa vari√°vel √© referenciada pelo c√≥digo do jogo. O valor aparece na tela como um n√∫mero ‚Äî e esse mesmo n√∫mero est√° em algum lugar da RAM.

![Gameplay do Wesnoth com o Ouro do Jogador em Destaque](/assets/images/1/5/wesnoth2.png)

Nosso objetivo √© encontrar exatamente onde esse n√∫mero est√° na mem√≥ria e mud√°-lo.

# Localizar

Vamos abrir o Cheat Engine e "conect√°-lo" ao processo do Wesnoth. Clique no √≠cone no canto superior esquerdo (parece um computador com uma lupa):

![Item de Sele√ß√£o de Processo no CheatEngine em Destaque](/assets/images/1/5/wesnoth3.png)

Na janela que abre, escolha o processo do Wesnoth:

![Selecionando o Wesnoth na Lista de Processos do CheatEngine](/assets/images/1/5/wesnoth4.png)

Agora, uma **varredura de mem√≥ria** (*memory scan*) funciona assim: voc√™ diz ao Cheat Engine um valor que quer encontrar, e ele vasculha toda a RAM do jogo em busca de endere√ßos que cont√™m esse valor. 

No exemplo, o jogador tem **75 de ouro**. Coloque esse valor na caixa *Value* e clique em **New Scan**:

![Escaneando o Ouro do Jogador no CheatEngine](/assets/images/1/5/wesnoth5.png)

V√£o aparecer **milhares de resultados**. Isso √© normal ‚Äî muitas partes da mem√≥ria cont√™m o valor 75 por coincid√™ncia (timers, vida dos inimigos, etc.). Precisamos filtrar.

A estrat√©gia √©: **mudar o ouro no jogo** e depois fazer uma nova busca com o novo valor. O Cheat Engine eliminar√° todos os endere√ßos que **n√£o mudaram** para o novo valor.

Recrute uma unidade de tropas e veja qual √© seu novo ouro. No exemplo, recrutamos uma unidade de 17 de ouro, sobrando **58**. Coloque 58 no campo *Value* e clique em **Next Scan**:

![Filtrando os Valores Encontrados para o Ouro do Jogador no CheatEngine](/assets/images/1/5/wesnoth6.png)

Agora s√≥ resta **um resultado** ‚Äî muito provavelmente o nosso ouro!

![O Endere√ßo de Mem√≥ria do Ouro do Jogador Encontrado no CheatEngine](/assets/images/1/5/wesnoth7.png)

# Alterar

No Cheat Engine, d√™ um duplo-clique no endere√ßo de mem√≥ria encontrado para mov√™-lo para a lista na parte de baixo da tela. Depois, d√™ outro duplo-clique no **valor** para edit√°-lo e coloque algo grande, como **200**:

![Alterando o Endere√ßo de Mem√≥ria do Ouro no CheatEngine](/assets/images/1/5/wesnoth8.png)

Volte para o Wesnoth. Seu ouro deve ter sido atualizado para 200. Recrute v√°rias unidades para confirmar que a mudan√ßa funcionou:

![Gameplay do Wesnoth Ilustrando um Hack Bem-Sucedido](/assets/images/1/5/wesnoth9.png)

Parab√©ns ‚Äî voc√™ acabou de fazer seu primeiro hack de mem√≥ria! üéâ

> **Nota:** Cada vez que o Wesnoth √© iniciado, o endere√ßo de mem√≥ria do ouro muda. Isso acontece por causa de algo chamado **Aloca√ß√£o Din√¢mica de Mem√≥ria** (DMA), que vamos explorar em uma aula futura.

&nbsp;
